# Application Configuration
spring.application.name=almaakcorp entreprise management system
server.port=${PORT:8080}

# Database Configuration
#spring.datasource.url=jdbc:mysql://localhost:3306/almaakcorp_quotation_db
#spring.datasource.url=jdbc:mysql://almaak-db.cibccmoyu5w3.us-east-1.rds.amazonaws.com:3306
#spring.datasource.username=root
#spring.datasource.password=your_new_password
#spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver
#spring.jpa.hibernate.ddl-auto=update


# PostgreSQL Configuration (Render)
spring.datasource.url=${DATABASE_URL:jdbc:postgresql://dpg-d4so5enpm1nc73c7mm60-a:5432/almaak_quotation_db?sslmode=require}
spring.datasource.username=${DB_USER:almaak_quotation_db_user}
spring.datasource.password=${DB_PASSWORD:Ery56qdhjjw8Sr3bL63OvxsltnbYxTVM}
spring.datasource.driver-class-name=org.postgresql.Driver
spring.jpa.hibernate.ddl-auto=update
spring.datasource.hikari.minimum-idle=1
spring.datasource.hikari.maximum-pool-size=5
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000
spring.datasource.hikari.connection-timeout=30000


# JPA / Hibernate Configuration
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect

# Logging Configuration
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE
logging.level.com.almaakcorp=INFO
logging.level.org.springframework.security=DEBUG

# Server Configuration
server.servlet.context-path=/
server.error.include-message=always
server.error.include-binding-errors=always

# Spring DevTools
spring.devtools.restart.enabled=true
spring.devtools.livereload.enabled=true

# Jackson Configuration
spring.jackson.date-format=yyyy-MM-dd HH:mm:ss
spring.jackson.time-zone=UTC

# File Upload Configuration
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=10MB
spring.servlet.multipart.enabled=true

# Actuator Configuration
management.endpoints.web.exposure.include=health,info,metrics
management.endpoint.health.show-details=always

# Batch Configuration
spring.batch.job.enabled=false
spring.batch.jdbc.initialize-schema=always

file.upload-dir=/app/batch_excel_Uploads

# Profile Image Upload Configuration
app.file.upload-dir=./uploads
app.file.base-url=${PUBLIC_BASE_URL:http://localhost:8080}
app.file.max-file-size=5242880
app.file.max-request-size=10485760

# Chat Configuration
chat.file.upload.dir=./uploads/chat
chat.message.max.length=4000
chat.room.max.participants=50

# WebSocket Configuration
spring.websocket.sockjs.heartbeat.time=25000
spring.websocket.sockjs.disconnect.delay=5000

# Trash Configuration
trash.file.path=./data/trash.json
trash.size.threshold.mb=4

# Session Configuration (in-memory HTTP session)
spring.session.timeout=1800s
server.servlet.session.cookie.name=ALMAAKCORP_SESSION
server.servlet.session.cookie.max-age=1800
server.servlet.session.cookie.http-only=true
server.servlet.session.cookie.secure=true
server.servlet.session.cookie.same-site=None
server.servlet.session.cookie.path=/
server.servlet.session.cookie.secure=true

# Disable Redis auto-configuration to prevent any Redis connection attempts
spring.autoconfigure.exclude=org.springframework.boot.autoconfigure.data.redis.RedisAutoConfiguration

# Security Configuration (Spring in-memory user disabled; using DB users)
# Comma-separated list of allowed frontend origins (supports patterns)
app.security.frontend-origins=${FRONTEND_ORIGINS:http://localhost:3000,http://127.0.0.1:3000,http://localhost:5173,https://almaak-quotation-system.onrender.com}
# Remove spring.security.user.* to avoid basic auth users

# WhatsApp Green API Configuration
whatsapp.green-api.instance-id=7105298170
whatsapp.green-api.api-token=bfce84cc7b0346c7a866ae4f79d797773bc2c883c7cf485c87